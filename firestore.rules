
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Login/Signup: Allow reading/creating users
    match /users/{userId} {
      allow read, create: if true;
      allow update, delete: if false; // Or add specific admin/owner logic
    }
    
    // Collections and Photos: Only authenticated users can access
    match /collections/{collectionId} {
      allow read, write, delete: if request.auth != null;
      
      match /photos/{photoId} {
        allow read, write, delete: if request.auth != null;

        match /variants/{variantId} {
           allow read, write, delete: if request.auth != null;
        }
      }
    }
  }
}
